<%- include('../components/header', { title: typeof title !== 'undefined' ? title : 'Profile', isProfileSection: true }) %>

<main>
  <div class="dash-shell">
    <div class="profile-layout">
      <%- include('../components/profileSidebar', { activeSection: typeof activeSection !== 'undefined' ? activeSection : 'profile' }) %>
      <div class="profile-main">
        <h3>Profile</h3>
        <p class="grey-text text-darken-2">
          Welcome, <%= (typeof user !== 'undefined' && user && user.name) ? user.name : 'User' %>
        </p>

        <hr>
        <!-- Showcase Message History in Profile Page -->
        <div class="previw-card">
            <div class="card-head">
                <h3>Announcement History</h3>  
            </div>
            <div class="card-body"> 
                <div id="message-history"></div> 
            </div>  
            <div class="pagination-controls center-align" style="margin-top: 20px;">
                <button id="prev-page" class="btn-flat waves-effect" disabled>
                    <i class="material-icons left">chevron_left</i>Prev
                </button>
                <span id="page-info" style="margin: 0 15px; font-weight: bold;">Page 1</span>
                <button id="next-page" class="btn-flat waves-effect">
                    Next<i class="material-icons right">chevron_right</i>
                </button>

            </div>


        
        <!----------------------------->

        <!-- Export Sleep Entries Data to CSV -->

        <hr><br>
        <div class="dash-card">
            <div class="feature-actions">
                <a href="/api/sleep-entries/export" class="btn black main-action-btn z-depth-0">
                    Export Sleep Data
                </a>
            </div>
        </div>

        <!-- User Account Deletion Button  -->
        <br>
        <div class="dash-card">
            <div class="feature-actions">
            <%- include('../components/confirmUserDelete') %>
            </div>
        </div>

        <!----------------------------->

      </div>
    </div>
  </div>
  <script src="/js/profile-page.js"></script>
</main>

<%- include('../components/footer') %>
